<!DOCTYPE html>
<html>
<head>
	<link href="style.css" rel="stylesheet">
	<title>Авторизация</title>
</head>
<body>
	
	<div id="content">
		<div id="form">
			<div id="errors">	
			</div>
			<form name="adminsProfile" action="http://localhost/cgi-bin/first.cgi" method="POST" id="myform">
				<input type="text" name="Code" class="form_text" id="code">
				<!--<input type="text" name="Codse" class="form_text"> -->
				<button type="button">Отправить</button>
			</form>
		<div>
	</div>
	</form>
</body>
<script type="text/javascript">
	function chk(){
		var s = document.getElementById("code").value;
		var errors = document.getElementsByClassName('error');
		var ediv = document.getElementById('errors');
		var form = document.getElementsByTagName('form')[0];
		ediv.innerHTML = "";

		var elen = document.createElement('div');
		elen.className = "error";
		elen.innerHTML = "Invalid line length";

		var enms = document.createElement('div');
		enms.className = "error";
		enms.innerHTML = "Invalid numbers";

		var eunq = document.createElement('div');
		eunq.className = "error";
		eunq.innerHTML = "Non-unique numbers";

		var flag=true;

		if(s.length != 4){
			ediv.append(elen);
			flag = false;
		}

		var f = false;
		for(var i=0;i <= s.length-1;i++){
			if((s.charAt(i)<'1')||(s.charAt(i)>'6'))
				f = true;
		}

		if(f){
			ediv.append(enms);
			flag = false;
		}

		f = false;
		var c = new Array(s.length);
		for(var i=0;i <= s.length-1;i++){
			c[i] = 0;
		}

		for(var i=0;i <= s.length-1;i++){
			if(c[s.charAt(i)-1] == 1){
				f = true;
			}else{
				c[s.charAt(i)-1] = 1;
			}
		}
		if(f){
			ediv.append(eunq);
			flag = false;
		}

		if(flag){
			form.submit()
		}

	}

	var b = document.getElementsByTagName('button')[0];	
	b.addEventListener('click', chk);

	document.addEventListener('keydown', function(event){
        if(event.keyCode == 13) {
        	event.preventDefault();
          	chk();
      }
  	})
</script>
</html>
